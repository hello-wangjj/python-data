# -*-coding:utf-8-*-
import urllib2
import re
headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36'
}
request = urllib2.Request(
    'http://finance.yahoo.com/q/cp?s=^DJI',
    headers=headers)
dstr = urllib2.urlopen(request).read().decode('utf-8')

# print dstr
# s='<tr><td class="yfnc_tabledata1"><b><a
# href="/q?s=AAPL">AAPL</a></b></td><td class="yfnc_tabledata1">Apple
# Inc.</td><td class="yfnc_tabledata1" align="right"><b>97.38</b>
# <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1"
# align="right"><img width="10" height="14" style="margin-right:-2px;"
# border="0"
# src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png"
# class="pos_arrow" alt="Up"> <b style="color:#008800;">0.04</b><b
# style="color:#008800;"> (0.05%)</b></td><td class="yfnc_tabledata1"
# align="right">19,117,649</td></tr>'
s = '''<tr><td class="yfnc_tabledata1"><b><a href="/q?s=AAPL">AAPL</a></b></td><td class="yfnc_tabledata1">Apple Inc.</td><td class="yfnc_tabledata1" align="right"><b>97.38</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="pos_arrow" alt="Up"> <b style="color:#008800;">0.04</b><b style="color:#008800;"> (0.05%)</b></td><td class="yfnc_tabledata1" align="right">19,117,649</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=AXP">AXP</a></b></td><td class="yfnc_tabledata1">American Express Company</td><td class="yfnc_tabledata1" align="right"><b>60.96</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">2.71</b> <b style="color:#cc0000;"> (4.26%)</b></td><td class="yfnc_tabledata1" align="right">5,826,975</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=BA">BA</a></b></td><td class="yfnc_tabledata1">The Boeing Company</td><td class="yfnc_tabledata1" align="right"><b>130.03</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="pos_arrow" alt="Up"> <b style="color:#008800;">0.11</b><b style="color:#008800;"> (0.08%)</b></td><td class="yfnc_tabledata1" align="right">1,978,865</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=CAT">CAT</a></b></td><td class="yfnc_tabledata1">Caterpillar Inc.</td><td class="yfnc_tabledata1" align="right"><b>74.66</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.57</b> <b style="color:#cc0000;"> (0.76%)</b></td><td class="yfnc_tabledata1" align="right">2,030,560</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=CSCO">CSCO</a></b></td><td class="yfnc_tabledata1">Cisco Systems, Inc.</td><td class="yfnc_tabledata1" align="right"><b>28.84</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"> <b style="color:#000000;">0.00</b><b style="color:#000000;"> (0.00%)</b></td><td class="yfnc_tabledata1" align="right">9,162,838</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=CVX">CVX</a></b></td><td class="yfnc_tabledata1">Chevron Corporation</td><td class="yfnc_tabledata1" align="right"><b>101.24</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.86</b> <b style="color:#cc0000;"> (0.84%)</b></td><td class="yfnc_tabledata1" align="right">3,381,372</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=DD">DD</a></b></td><td class="yfnc_tabledata1">E. I. du Pont de Nemours and Company</td><td class="yfnc_tabledata1" align="right"><b>65.87</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.88</b> <b style="color:#cc0000;"> (1.32%)</b></td><td class="yfnc_tabledata1" align="right">923,174</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=DIS">DIS</a></b></td><td class="yfnc_tabledata1">The Walt Disney Company</td><td class="yfnc_tabledata1" align="right"><b>98.22</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="pos_arrow" alt="Up"> <b style="color:#008800;">0.65</b><b style="color:#008800;"> (0.67%)</b></td><td class="yfnc_tabledata1" align="right">3,018,432</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=GE">GE</a></b></td><td class="yfnc_tabledata1">General Electric Company</td><td class="yfnc_tabledata1" align="right"><b>30.26</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="pos_arrow" alt="Up"> <b style="color:#008800;">0.43</b><b style="color:#008800;"> (1.46%)</b></td><td class="yfnc_tabledata1" align="right">18,634,361</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=GS">GS</a></b></td><td class="yfnc_tabledata1">The Goldman Sachs Group, Inc.</td><td class="yfnc_tabledata1" align="right"><b>146.93</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">1.70</b> <b style="color:#cc0000;"> (1.15%)</b></td><td class="yfnc_tabledata1" align="right">2,395,225</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=HD">HD</a></b></td><td class="yfnc_tabledata1">The Home Depot, Inc.</td><td class="yfnc_tabledata1" align="right"><b>125.50</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">2.33</b> <b style="color:#cc0000;"> (1.82%)</b></td><td class="yfnc_tabledata1" align="right">3,476,776</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=IBM">IBM</a></b></td><td class="yfnc_tabledata1">International Business Machines Corporation</td><td class="yfnc_tabledata1" align="right"><b>151.58</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="pos_arrow" alt="Up"> <b style="color:#008800;">0.30</b><b style="color:#008800;"> (0.20%)</b></td><td class="yfnc_tabledata1" align="right">1,260,792</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=INTC">INTC</a></b></td><td class="yfnc_tabledata1">Intel Corporation</td><td class="yfnc_tabledata1" align="right"><b>31.90</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.27</b> <b style="color:#cc0000;"> (0.84%)</b></td><td class="yfnc_tabledata1" align="right">9,279,930</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=JNJ">JNJ</a></b></td><td class="yfnc_tabledata1">Johnson &amp; Johnson</td><td class="yfnc_tabledata1" align="right"><b>116.57</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.22</b> <b style="color:#cc0000;"> (0.19%)</b></td><td class="yfnc_tabledata1" align="right">3,335,555</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=JPM">JPM</a></b></td><td class="yfnc_tabledata1">JPMorgan Chase &amp; Co.</td><td class="yfnc_tabledata1" align="right"><b>62.29</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.98</b> <b style="color:#cc0000;"> (1.54%)</b></td><td class="yfnc_tabledata1" align="right">9,640,464</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=KO">KO</a></b></td><td class="yfnc_tabledata1">The Coca-Cola Company</td><td class="yfnc_tabledata1" align="right"><b>44.95</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.17</b> <b style="color:#cc0000;"> (0.37%)</b></td><td class="yfnc_tabledata1" align="right">6,352,312</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=MCD">MCD</a></b></td><td class="yfnc_tabledata1">McDonald's Corp.</td><td class="yfnc_tabledata1" align="right"><b>122.90</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.09</b> <b style="color:#cc0000;"> (0.07%)</b></td><td class="yfnc_tabledata1" align="right">2,734,049</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=MMM">MMM</a></b></td><td class="yfnc_tabledata1">3M Company</td><td class="yfnc_tabledata1" align="right"><b>167.13</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="pos_arrow" alt="Up"> <b style="color:#008800;">0.00</b><b style="color:#008800;"> (0.00%)</b></td><td class="yfnc_tabledata1" align="right">855,998</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=MRK">MRK</a></b></td><td class="yfnc_tabledata1">Merck &amp; Co. Inc.</td><td class="yfnc_tabledata1" align="right"><b>55.94</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.17</b> <b style="color:#cc0000;"> (0.30%)</b></td><td class="yfnc_tabledata1" align="right">3,169,505</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=MSFT">MSFT</a></b></td><td class="yfnc_tabledata1">Microsoft Corporation</td><td class="yfnc_tabledata1" align="right"><b>49.88</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.26</b> <b style="color:#cc0000;"> (0.53%)</b></td><td class="yfnc_tabledata1" align="right">21,819,066</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=NKE">NKE</a></b></td><td class="yfnc_tabledata1">NIKE, Inc.</td><td class="yfnc_tabledata1" align="right"><b>54.48</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.43</b> <b style="color:#cc0000;"> (0.78%)</b></td><td class="yfnc_tabledata1" align="right">4,313,255</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=PFE">PFE</a></b></td><td class="yfnc_tabledata1">Pfizer Inc.</td><td class="yfnc_tabledata1" align="right"><b>34.79</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="pos_arrow" alt="Up"> <b style="color:#008800;">0.05</b><b style="color:#008800;"> (0.14%)</b></td><td class="yfnc_tabledata1" align="right">13,772,932</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=PG">PG</a></b></td><td class="yfnc_tabledata1">The Procter &amp; Gamble Company</td><td class="yfnc_tabledata1" align="right"><b>82.97</b> <nobr><small>12:49PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="pos_arrow" alt="Up"> <b style="color:#008800;">0.40</b><b style="color:#008800;"> (0.48%)</b></td><td class="yfnc_tabledata1" align="right">2,816,391</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=TRV">TRV</a></b></td><td class="yfnc_tabledata1">The Travelers Companies, Inc.</td><td class="yfnc_tabledata1" align="right"><b>112.60</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.40</b> <b style="color:#cc0000;"> (0.35%)</b></td><td class="yfnc_tabledata1" align="right">687,659</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=UNH">UNH</a></b></td><td class="yfnc_tabledata1">UnitedHealth Group Incorporated</td><td class="yfnc_tabledata1" align="right"><b>137.93</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.16</b> <b style="color:#cc0000;"> (0.12%)</b></td><td class="yfnc_tabledata1" align="right">1,169,247</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=UTX">UTX</a></b></td><td class="yfnc_tabledata1">United Technologies Corporation</td><td class="yfnc_tabledata1" align="right"><b>100.78</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.43</b> <b style="color:#cc0000;"> (0.42%)</b></td><td class="yfnc_tabledata1" align="right">1,668,179</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=V">V</a></b></td><td class="yfnc_tabledata1">Visa Inc.</td><td class="yfnc_tabledata1" align="right"><b>78.15</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.25</b> <b style="color:#cc0000;"> (0.32%)</b></td><td class="yfnc_tabledata1" align="right">3,667,975</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=VZ">VZ</a></b></td><td class="yfnc_tabledata1">Verizon Communications Inc.</td><td class="yfnc_tabledata1" align="right"><b>52.94</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="pos_arrow" alt="Up"> <b style="color:#008800;">0.37</b><b style="color:#008800;"> (0.71%)</b></td><td class="yfnc_tabledata1" align="right">5,485,222</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=WMT">WMT</a></b></td><td class="yfnc_tabledata1">Wal-Mart Stores Inc.</td><td class="yfnc_tabledata1" align="right"><b>70.90</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="pos_arrow" alt="Up"> <b style="color:#008800;">0.37</b><b style="color:#008800;"> (0.52%)</b></td><td class="yfnc_tabledata1" align="right">4,432,834</td></tr><tr><td class="yfnc_tabledata1"><b><a href="/q?s=XOM">XOM</a></b></td><td class="yfnc_tabledata1">Exxon Mobil Corporation</td><td class="yfnc_tabledata1" align="right"><b>90.20</b> <nobr><small>12:50PM EDT</small></nobr></td><td class="yfnc_tabledata1" align="right"><img width="10" height="14" style="margin-right:-2px;" border="0" src="http://l.yimg.com/os/mit/media/m/base/images/transparent-1093278.png" class="neg_arrow" alt="Down"> <b style="color:#cc0000;">0.39</b> <b style="color:#cc0000;"> (0.43%)</b></td><td class="yfnc_tabledata1" align="right">5,561,866</td></tr>'''
pattern = re.compile(
    '<tr>\s*?<td class="yfnc_tabledata1">.*?<a .*?>(.*?)</a>.*?<td class="yfnc_tabledata1">(.*?)</td>.*?<b>(.*?)</b>.*?<b .*?>(.*?)</b>.*?<b .*?>(.*?)</b>.*?<td .*?>(.*?)</td></tr>')
m = re.findall(pattern, dstr)
if m:
    print m
    print '\n'
    # print (len(m))
else:
    print 'no match'
